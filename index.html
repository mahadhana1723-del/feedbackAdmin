<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">

    <div class="max-w-2xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">ðŸ“‹ Received Feedbacks</h1>
        
        <div id="feedbackList" class="space-y-4">
            <p class="text-gray-500 text-center">Loading messages...</p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        // ðŸ”¥ à°®à±€ à°µà°¿à°µà°°à°¾à°²à°¤à±‹ à°…à°ªà±à°¡à±‡à°Ÿà± à°šà±‡à°¯à°¬à°¡à°¿à°¨ Config
        const firebaseConfig = {
            apiKey: "AIzaSyCpEMtX1eP7YwZDH0qLBRGci6VkhBgcJVo",
            authDomain: "feedback-4ace7.firebaseapp.com",
            projectId: "feedback-4ace7",
            storageBucket: "feedback-4ace7.firebasestorage.app",
            messagingSenderId: "331705524032",
            appId: "1:331705524032:web:7e8d046e71984f74a6e4a5",
            measurementId: "G-0WL2N0YFQ1"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const q = query(collection(db, "feedbacks"), orderBy("date", "desc"));

        onSnapshot(q, (snapshot) => {
            const list = document.getElementById('feedbackList');
            list.innerHTML = ""; 

            if(snapshot.empty) {
                list.innerHTML = "<p class='text-gray-500 text-center'>No messages yet.</p>";
            }

            snapshot.forEach((doc) => {
                const data = doc.data();
                let dateStr = "Just now";
                if(data.date) {
                    dateStr = new Date(data.date.seconds * 1000).toLocaleString();
                }

                const card = `
                    <div class="bg-white p-4 rounded-lg shadow border-l-4 border-blue-500">
                        <p class="text-gray-800 text-lg">${data.message}</p>
                        <p class="text-gray-400 text-xs mt-2 text-right">${dateStr}</p>
                    </div>
                `;
                list.innerHTML += card;
            });
        });
    </script>
</body>
</html>